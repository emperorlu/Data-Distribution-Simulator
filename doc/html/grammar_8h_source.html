<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CppDistributors: grammar.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>grammar.h</h1>  </div>
</div>
<div class="contents">
<a href="grammar_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// -*- mode:C++; tab-width:8; c-basic-offset:2; indent-tabs-mode:t -*-</span>
<a name="l00002"></a>00002 <span class="comment">// vim: ts=8 sw=2 smarttab</span>
<a name="l00003"></a>00003 <span class="comment">/*</span>
<a name="l00004"></a>00004 <span class="comment"> * Ceph - scalable distributed file system</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * Copyright (C) 2004-2008 Sage Weil &lt;sage@newdream.net&gt;</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> * This is free software; you can redistribute it and/or</span>
<a name="l00009"></a>00009 <span class="comment"> * modify it under the terms of the GNU Lesser General Public</span>
<a name="l00010"></a>00010 <span class="comment"> * License version 2.1, as published by the Free Software</span>
<a name="l00011"></a>00011 <span class="comment"> * Foundation.  See file COPYING.</span>
<a name="l00012"></a>00012 <span class="comment"> *</span>
<a name="l00013"></a>00013 <span class="comment"> */</span>
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 <span class="preprocessor">#ifndef __CRUSH_GRAMMAR_H</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span><span class="preprocessor">#define __CRUSH_GRAMMAR_H</span>
<a name="l00017"></a>00017 <span class="preprocessor"></span>
<a name="l00018"></a>00018 <span class="comment">//#define BOOST_SPIRIT_DEBUG</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#include &lt;boost/spirit/core.hpp&gt;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &lt;boost/spirit/tree/ast.hpp&gt;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;boost/spirit/tree/tree_to_xml.hpp&gt;</span>
<a name="l00023"></a>00023 <span class="keyword">using namespace </span>boost::spirit;
<a name="l00024"></a>00024 
<a name="l00025"></a><a class="code" href="structcrush__grammar.html">00025</a> <span class="keyword">struct </span><a class="code" href="structcrush__grammar.html">crush_grammar</a> : <span class="keyword">public</span> grammar&lt;crush_grammar&gt;
<a name="l00026"></a>00026 {
<a name="l00027"></a>00027   <span class="keyword">enum</span> {
<a name="l00028"></a><a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828ca6fc0b221f04542714945cbd46382d188">00028</a>     _int = 1,
<a name="l00029"></a><a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828caddd9d65910c4236e89026b00d774cdbd">00029</a>     <a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828caddd9d65910c4236e89026b00d774cdbd">_posint</a>,
<a name="l00030"></a><a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828caa2705cb796da38525892f868b84fcd78">00030</a>     <a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828caa2705cb796da38525892f868b84fcd78">_negint</a>,
<a name="l00031"></a><a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828ca649f52602a5c8f4579f714532c4bc19c">00031</a>     <a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828ca649f52602a5c8f4579f714532c4bc19c">_name</a>,
<a name="l00032"></a><a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828cac030e80cf8d71a36af4edb9c7916eafd">00032</a>     <a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828cac030e80cf8d71a36af4edb9c7916eafd">_device</a>,
<a name="l00033"></a><a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828cae72616fc253d718d62f736a3335b2006">00033</a>     <a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828cae72616fc253d718d62f736a3335b2006">_bucket_type</a>,
<a name="l00034"></a><a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828ca5bce5904f0cf39f2895f890e367dae80">00034</a>     <a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828ca5bce5904f0cf39f2895f890e367dae80">_bucket_id</a>,
<a name="l00035"></a><a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828caa7a56698c3180e57d735b1fa496c92a7">00035</a>     <a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828caa7a56698c3180e57d735b1fa496c92a7">_bucket_alg</a>,
<a name="l00036"></a><a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828ca87aaea20d323dc6577a3cd98f8842937">00036</a>     <a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828ca87aaea20d323dc6577a3cd98f8842937">_bucket_hash</a>,
<a name="l00037"></a><a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828ca9b3464293f86834995d44131cabaf36e">00037</a>     <a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828ca9b3464293f86834995d44131cabaf36e">_bucket_item</a>,
<a name="l00038"></a><a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828ca62e7536ffdb371280852db1f660a9eb1">00038</a>     <a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828ca62e7536ffdb371280852db1f660a9eb1">_bucket</a>,
<a name="l00039"></a><a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828ca408939bf431261039b471a73d2e570f4">00039</a>     <a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828ca408939bf431261039b471a73d2e570f4">_step_take</a>,
<a name="l00040"></a><a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828cad49a74d2677b9376cba7cf2a8ae4c056">00040</a>     <a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828cad49a74d2677b9376cba7cf2a8ae4c056">_step_choose</a>,
<a name="l00041"></a><a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828ca4861c6e498d4696911a246c9dfe25635">00041</a>     <a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828ca4861c6e498d4696911a246c9dfe25635">_step_chooseleaf</a>,
<a name="l00042"></a><a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828ca790a02cfb8db225168eb182ef0906355">00042</a>     <a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828ca790a02cfb8db225168eb182ef0906355">_step_emit</a>,
<a name="l00043"></a><a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828ca6c7b59a55b20f0c9d55445736078e489">00043</a>     <a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828ca6c7b59a55b20f0c9d55445736078e489">_step</a>,
<a name="l00044"></a><a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828cafb2afc7f65577b2f680b4ff3f266a89b">00044</a>     <a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828cafb2afc7f65577b2f680b4ff3f266a89b">_crushrule</a>,
<a name="l00045"></a><a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828cabfd8a0313d972e654a5753d21eecc8d5">00045</a>     <a class="code" href="structcrush__grammar.html#adcbfb2861a6435f0975c8e01e652828cabfd8a0313d972e654a5753d21eecc8d5">_crushmap</a>,
<a name="l00046"></a>00046   };
<a name="l00047"></a>00047 
<a name="l00048"></a>00048   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> ScannerT&gt;
<a name="l00049"></a><a class="code" href="structcrush__grammar_1_1definition.html">00049</a>   <span class="keyword">struct </span><a class="code" href="structcrush__grammar_1_1definition.html">definition</a>
<a name="l00050"></a>00050   {
<a name="l00051"></a><a class="code" href="structcrush__grammar_1_1definition.html#a366a65d1e60f1e7ad0828ebf07a1c253">00051</a>     rule&lt;ScannerT, parser_context&lt;&gt;, parser_tag&lt;_int&gt; &gt;      <a class="code" href="structcrush__grammar_1_1definition.html#a366a65d1e60f1e7ad0828ebf07a1c253">integer</a>;
<a name="l00052"></a><a class="code" href="structcrush__grammar_1_1definition.html#a5c3e584a1d387e1e7de8314195287fd1">00052</a>     rule&lt;ScannerT, parser_context&lt;&gt;, parser_tag&lt;_posint&gt; &gt;      <a class="code" href="structcrush__grammar_1_1definition.html#a5c3e584a1d387e1e7de8314195287fd1">posint</a>;
<a name="l00053"></a><a class="code" href="structcrush__grammar_1_1definition.html#a09463d09263aaf1d8cbdd293f42b4c86">00053</a>     rule&lt;ScannerT, parser_context&lt;&gt;, parser_tag&lt;_negint&gt; &gt;      <a class="code" href="structcrush__grammar_1_1definition.html#a09463d09263aaf1d8cbdd293f42b4c86">negint</a>;
<a name="l00054"></a><a class="code" href="structcrush__grammar_1_1definition.html#aab2709ffdfc17105dc9595039a6dedf9">00054</a>     rule&lt;ScannerT, parser_context&lt;&gt;, parser_tag&lt;_name&gt; &gt;      <a class="code" href="structcrush__grammar_1_1definition.html#aab2709ffdfc17105dc9595039a6dedf9">name</a>;
<a name="l00055"></a>00055 
<a name="l00056"></a><a class="code" href="structcrush__grammar_1_1definition.html#a9ea3557c733d28c7f9fc409b8a31c8f7">00056</a>     rule&lt;ScannerT, parser_context&lt;&gt;, parser_tag&lt;_device&gt; &gt;      <a class="code" href="structcrush__grammar_1_1definition.html#a9ea3557c733d28c7f9fc409b8a31c8f7">device</a>;
<a name="l00057"></a>00057 
<a name="l00058"></a><a class="code" href="structcrush__grammar_1_1definition.html#a33b7433f8fa61f6f7ef0a2b12a8ca7c1">00058</a>     rule&lt;ScannerT, parser_context&lt;&gt;, parser_tag&lt;_bucket_type&gt; &gt;    <a class="code" href="structcrush__grammar_1_1definition.html#a33b7433f8fa61f6f7ef0a2b12a8ca7c1">bucket_type</a>;
<a name="l00059"></a>00059 
<a name="l00060"></a><a class="code" href="structcrush__grammar_1_1definition.html#a81eda50af3c923fbdd53f604b1687e1d">00060</a>     rule&lt;ScannerT, parser_context&lt;&gt;, parser_tag&lt;_bucket_id&gt; &gt;      <a class="code" href="structcrush__grammar_1_1definition.html#a81eda50af3c923fbdd53f604b1687e1d">bucket_id</a>;
<a name="l00061"></a><a class="code" href="structcrush__grammar_1_1definition.html#aaf80c086a3cf3be132500853a5bff052">00061</a>     rule&lt;ScannerT, parser_context&lt;&gt;, parser_tag&lt;_bucket_alg&gt; &gt;     <a class="code" href="structcrush__grammar_1_1definition.html#aaf80c086a3cf3be132500853a5bff052">bucket_alg</a>;
<a name="l00062"></a><a class="code" href="structcrush__grammar_1_1definition.html#a106f24949a044485a55ad79efc2fd51c">00062</a>     rule&lt;ScannerT, parser_context&lt;&gt;, parser_tag&lt;_bucket_hash&gt; &gt;    <a class="code" href="structcrush__grammar_1_1definition.html#a106f24949a044485a55ad79efc2fd51c">bucket_hash</a>;
<a name="l00063"></a><a class="code" href="structcrush__grammar_1_1definition.html#a8c487484d3139bb8f8d0db49ccd75565">00063</a>     rule&lt;ScannerT, parser_context&lt;&gt;, parser_tag&lt;_bucket_item&gt; &gt;    <a class="code" href="structcrush__grammar_1_1definition.html#a8c487484d3139bb8f8d0db49ccd75565">bucket_item</a>;
<a name="l00064"></a><a class="code" href="structcrush__grammar_1_1definition.html#a49f92a6ae5909cd973caff925fcdd06c">00064</a>     rule&lt;ScannerT, parser_context&lt;&gt;, parser_tag&lt;_bucket&gt; &gt;      <a class="code" href="structcrush__grammar_1_1definition.html#a49f92a6ae5909cd973caff925fcdd06c">bucket</a>;
<a name="l00065"></a>00065 
<a name="l00066"></a><a class="code" href="structcrush__grammar_1_1definition.html#aad21859d7edb8fa7a9921421585648ff">00066</a>     rule&lt;ScannerT, parser_context&lt;&gt;, parser_tag&lt;_step_take&gt; &gt;      <a class="code" href="structcrush__grammar_1_1definition.html#aad21859d7edb8fa7a9921421585648ff">step_take</a>;
<a name="l00067"></a><a class="code" href="structcrush__grammar_1_1definition.html#ac388cf18cebe990f2a53f1b64ccb5e6e">00067</a>     rule&lt;ScannerT, parser_context&lt;&gt;, parser_tag&lt;_step_choose&gt; &gt;    <a class="code" href="structcrush__grammar_1_1definition.html#ac388cf18cebe990f2a53f1b64ccb5e6e">step_choose</a>;
<a name="l00068"></a><a class="code" href="structcrush__grammar_1_1definition.html#a753c3f0bd430b17d157c2de14ecc7ca3">00068</a>     rule&lt;ScannerT, parser_context&lt;&gt;, parser_tag&lt;_step_chooseleaf&gt; &gt;      <a class="code" href="structcrush__grammar_1_1definition.html#a753c3f0bd430b17d157c2de14ecc7ca3">step_chooseleaf</a>;
<a name="l00069"></a><a class="code" href="structcrush__grammar_1_1definition.html#a52c6dbb1bc431507b98921fe3e207bd4">00069</a>     rule&lt;ScannerT, parser_context&lt;&gt;, parser_tag&lt;_step_emit&gt; &gt;      <a class="code" href="structcrush__grammar_1_1definition.html#a52c6dbb1bc431507b98921fe3e207bd4">step_emit</a>;
<a name="l00070"></a><a class="code" href="structcrush__grammar_1_1definition.html#a3f57096a062fac193a0e29b2968bda96">00070</a>     rule&lt;ScannerT, parser_context&lt;&gt;, parser_tag&lt;_step&gt; &gt;      <a class="code" href="structcrush__grammar_1_1definition.html#a3f57096a062fac193a0e29b2968bda96">step</a>;
<a name="l00071"></a><a class="code" href="structcrush__grammar_1_1definition.html#a2813d11216e8847b482795e2c0f289ea">00071</a>     rule&lt;ScannerT, parser_context&lt;&gt;, parser_tag&lt;_crushrule&gt; &gt;      <a class="code" href="structcrush__grammar_1_1definition.html#a2813d11216e8847b482795e2c0f289ea">crushrule</a>;
<a name="l00072"></a>00072 
<a name="l00073"></a><a class="code" href="structcrush__grammar_1_1definition.html#a130bccec48a1fa0ae10b2cbf527f4c39">00073</a>     rule&lt;ScannerT, parser_context&lt;&gt;, parser_tag&lt;_crushmap&gt; &gt;      <a class="code" href="structcrush__grammar_1_1definition.html#a130bccec48a1fa0ae10b2cbf527f4c39">crushmap</a>;
<a name="l00074"></a>00074 
<a name="l00075"></a><a class="code" href="structcrush__grammar_1_1definition.html#a24014206511972c007efb29dee02bb08">00075</a>     <a class="code" href="structcrush__grammar_1_1definition.html">definition</a>(<a class="code" href="structcrush__grammar.html">crush_grammar</a> <span class="keyword">const</span>&amp; <span class="comment">/*self*/</span>)
<a name="l00076"></a>00076     {
<a name="l00077"></a>00077       <span class="comment">// base types</span>
<a name="l00078"></a>00078       integer     =   leaf_node_d[ lexeme_d[
<a name="l00079"></a>00079                                             (!ch_p(<span class="charliteral">&#39;-&#39;</span>) &gt;&gt; +digit_p)
<a name="l00080"></a>00080                                             ] ];
<a name="l00081"></a>00081       posint     =   leaf_node_d[ lexeme_d[ +digit_p ] ];
<a name="l00082"></a>00082       negint     =   leaf_node_d[ lexeme_d[ ch_p(<span class="charliteral">&#39;-&#39;</span>) &gt;&gt; +digit_p ] ];
<a name="l00083"></a>00083       name = leaf_node_d[ lexeme_d[ +alnum_p ] ];
<a name="l00084"></a>00084 
<a name="l00085"></a>00085       <span class="comment">// devices</span>
<a name="l00086"></a>00086       device = str_p(<span class="stringliteral">&quot;device&quot;</span>) &gt;&gt; posint &gt;&gt; name;
<a name="l00087"></a>00087 
<a name="l00088"></a>00088       <span class="comment">// bucket types</span>
<a name="l00089"></a>00089       bucket_type = str_p(<span class="stringliteral">&quot;type&quot;</span>) &gt;&gt; posint &gt;&gt; name;
<a name="l00090"></a>00090 
<a name="l00091"></a>00091       <span class="comment">// buckets</span>
<a name="l00092"></a>00092       bucket_id = str_p(<span class="stringliteral">&quot;id&quot;</span>) &gt;&gt; negint;
<a name="l00093"></a>00093       bucket_alg = str_p(<span class="stringliteral">&quot;alg&quot;</span>) &gt;&gt; ( str_p(<span class="stringliteral">&quot;uniform&quot;</span>) |
<a name="l00094"></a>00094                                      str_p(<span class="stringliteral">&quot;list&quot;</span>) |
<a name="l00095"></a>00095                                      str_p(<span class="stringliteral">&quot;tree&quot;</span>) |
<a name="l00096"></a>00096                                      str_p(<span class="stringliteral">&quot;straw&quot;</span>) );
<a name="l00097"></a>00097       bucket_hash = str_p(<span class="stringliteral">&quot;hash&quot;</span>) &gt;&gt; ( integer |
<a name="l00098"></a>00098                                        str_p(<span class="stringliteral">&quot;rjenkins1&quot;</span>) );
<a name="l00099"></a>00099       bucket_item = str_p(<span class="stringliteral">&quot;item&quot;</span>) &gt;&gt; name
<a name="l00100"></a>00100                                   &gt;&gt; !( str_p(<span class="stringliteral">&quot;weight&quot;</span>) &gt;&gt; real_p )
<a name="l00101"></a>00101                                   &gt;&gt; !( str_p(<span class="stringliteral">&quot;pos&quot;</span>) &gt;&gt; posint );
<a name="l00102"></a>00102       bucket = name &gt;&gt; name &gt;&gt; <span class="charliteral">&#39;{&#39;</span> &gt;&gt; !bucket_id &gt;&gt; bucket_alg &gt;&gt; *bucket_hash &gt;&gt; *bucket_item &gt;&gt; <span class="charliteral">&#39;}&#39;</span>;
<a name="l00103"></a>00103 
<a name="l00104"></a>00104       <span class="comment">// rules</span>
<a name="l00105"></a>00105       step_take = str_p(<span class="stringliteral">&quot;take&quot;</span>) &gt;&gt; name;
<a name="l00106"></a>00106       step_choose = str_p(<span class="stringliteral">&quot;choose&quot;</span>)
<a name="l00107"></a>00107         &gt;&gt; ( str_p(<span class="stringliteral">&quot;indep&quot;</span>) | str_p(<span class="stringliteral">&quot;firstn&quot;</span>) )
<a name="l00108"></a>00108         &gt;&gt; integer
<a name="l00109"></a>00109         &gt;&gt; str_p(<span class="stringliteral">&quot;type&quot;</span>) &gt;&gt; name;
<a name="l00110"></a>00110       step_chooseleaf = str_p(<span class="stringliteral">&quot;chooseleaf&quot;</span>)
<a name="l00111"></a>00111         &gt;&gt; ( str_p(<span class="stringliteral">&quot;indep&quot;</span>) | str_p(<span class="stringliteral">&quot;firstn&quot;</span>) )
<a name="l00112"></a>00112         &gt;&gt; integer
<a name="l00113"></a>00113         &gt;&gt; str_p(<span class="stringliteral">&quot;type&quot;</span>) &gt;&gt; name;
<a name="l00114"></a>00114       step_emit = str_p(<span class="stringliteral">&quot;emit&quot;</span>);
<a name="l00115"></a>00115       step = str_p(<span class="stringliteral">&quot;step&quot;</span>) &gt;&gt; ( step_take |
<a name="l00116"></a>00116                                 step_choose |
<a name="l00117"></a>00117                                 step_chooseleaf |
<a name="l00118"></a>00118                                 step_emit );
<a name="l00119"></a>00119       crushrule = str_p(<span class="stringliteral">&quot;rule&quot;</span>) &gt;&gt; !name &gt;&gt; <span class="charliteral">&#39;{&#39;</span>
<a name="l00120"></a>00120                            &gt;&gt; str_p(<span class="stringliteral">&quot;ruleset&quot;</span>) &gt;&gt; posint
<a name="l00121"></a>00121                            &gt;&gt; str_p(<span class="stringliteral">&quot;type&quot;</span>) &gt;&gt; ( str_p(<span class="stringliteral">&quot;replicated&quot;</span>) | str_p(<span class="stringliteral">&quot;raid4&quot;</span>) )
<a name="l00122"></a>00122                            &gt;&gt; str_p(<span class="stringliteral">&quot;min_size&quot;</span>) &gt;&gt; posint
<a name="l00123"></a>00123                            &gt;&gt; str_p(<span class="stringliteral">&quot;max_size&quot;</span>) &gt;&gt; posint
<a name="l00124"></a>00124                            &gt;&gt; +step
<a name="l00125"></a>00125                            &gt;&gt; <span class="charliteral">&#39;}&#39;</span>;
<a name="l00126"></a>00126 
<a name="l00127"></a>00127       <span class="comment">// the whole crush map</span>
<a name="l00128"></a>00128       crushmap = *(device | bucket_type) &gt;&gt; *bucket &gt;&gt; *crushrule;
<a name="l00129"></a>00129     }
<a name="l00130"></a>00130 
<a name="l00131"></a>00131     rule&lt;ScannerT, parser_context&lt;&gt;, parser_tag&lt;_crushmap&gt; &gt; <span class="keyword">const</span>&amp;
<a name="l00132"></a><a class="code" href="structcrush__grammar_1_1definition.html#a48996b7bac94c94ede8a2bbb65da1b56">00132</a>     <a class="code" href="structcrush__grammar_1_1definition.html#a48996b7bac94c94ede8a2bbb65da1b56">start</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> crushmap; }
<a name="l00133"></a>00133   };
<a name="l00134"></a>00134 };
<a name="l00135"></a>00135 
<a name="l00136"></a>00136 <span class="preprocessor">#endif</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Mon Oct 11 2010 13:09:26 for CppDistributors by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
